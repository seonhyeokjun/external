# Section 7. 외부 설정과 프로필 1

---

## 1. 프로젝트 설정
- Spring Boot 프로젝트에서 외부 설정을 적용하려면 다양한 방식으로 설정을 주입할 수 있습니다. 환경 변수, 자바 시스템 속성, 커맨드 라인 인수 등을 통해 설정 데이터를 주입받을 수 있습니다.

---

## 2. 외부 설정이란?
- 외부 설정이란 **애플리케이션 코드와 별개**로 외부에서 설정 값을 주입하는 방식을 의미합니다.
- 이러한 설정들은 코드 수정 없이 환경에 따라 애플리케이션의 동작을 다르게 할 수 있도록 유연성을 제공합니다.

---

## 3. 외부 설정 - OS 환경 변수
- **OS 환경 변수**를 통해 Spring Boot 애플리케이션의 설정 값을 주입할 수 있습니다.
- 예를 들어, 환경 변수 `MY_PROPERTY`를 설정한 후 `@Value("${my.property}")`로 이를 가져올 수 있습니다.

---

## 4. 외부 설정 - 자바 시스템 속성
- **자바 시스템 속성**은 `-D` 옵션을 사용하여 설정할 수 있습니다.
- 예시:
```bash
java -Dmy.property=value -jar myapp.jar
```
- 위와 같이 설정된 자바 시스템 속성은 `@Value("${my.property}")`로 주입받을 수 있습니다.

---

## 5. 외부 설정 - 커맨드 라인 인수
- Spring Boot 애플리케이션을 실행할 때 **커맨드 라인 인수**로 설정 값을 전달할 수 있습니다.
- 예시:
```bash
java -jar myapp.jar --my.property=value
```
- 이를 통해 Spring Boot는 `--`로 시작하는 커맨드 라인 인수를 설정으로 인식하고 해당 값을 사용합니다.

---

## 6. 외부 설정 - 커맨드 라인 옵션 인수
- **커맨드 라인 옵션 인수**는 실행 시 전달된 값을 파싱하여 Spring 애플리케이션의 설정으로 사용합니다.
- 설정 값은 애플리케이션의 `application.properties` 파일을 덮어쓸 수 있습니다.

---

## 7. 외부 설정 - 커맨드 라인 옵션 인수와 스프링 부트
- **Spring Boot**는 커맨드 라인 인수를 자동으로 인식하여 설정 값으로 처리합니다.
- `--my.property=value`와 같은 옵션을 사용하면 `@Value("${my.property}")`로 값을 주입받을 수 있습니다.

---

## 8. 외부 설정 - 스프링 통합
- **Spring 환경**과 통합하여 여러 소스의 설정을 관리할 수 있습니다.
- Spring은 환경 변수, 시스템 속성, 파일 등의 다양한 소스에서 설정을 주입할 수 있는 유연한 구조를 제공합니다.

---

## 9. 설정 데이터1 - 외부 파일
- 설정 파일은 애플리케이션 외부에 위치할 수 있습니다.
- **`application.properties`** 또는 **`application.yml`** 파일을 애플리케이션 외부 경로에 두어 Spring Boot가 이를 자동으로 인식하고 사용하게 할 수 있습니다.

---

## 10. 설정 데이터2 - 내부 파일 분리
- 설정 파일을 **내부적으로 분리**하여 환경별로 다른 설정 값을 정의할 수 있습니다.
- 예를 들어 `application-dev.properties` 파일은 개발 환경에서만 적용되도록 할 수 있습니다.

---

## 11. 설정 데이터3 - 내부 파일 합체
- 여러 개의 설정 파일을 **합체**하여 하나의 설정으로 만들 수 있습니다.
- Spring Boot는 `application.properties` 파일을 기본으로 하여 다양한 설정 파일을 병합하여 사용할 수 있습니다.

---

## 12. 우선순위 - 설정 데이터
- Spring Boot는 설정 파일의 우선순위를 명확히 정의합니다.
- 예를 들어, 커맨드 라인 인수는 파일 설정보다 높은 우선순위를 가집니다.

---

## 13. 우선순위 - 전체
- 전체 우선순위는 다음과 같습니다:
  1. 커맨드 라인 인수
  2. 자바 시스템 속성 (`-D` 옵션)
  3. OS 환경 변수
  4. `application.properties` 또는 `application.yml`
  5. 외부 설정 파일
  6. 내부 설정 파일
- 이 우선순위에 따라 설정 값이 덮어쓰여지고, 최종적으로 애플리케이션에 적용됩니다.

---

**외부 설정을 효과적으로 사용하면 다양한 환경에서 애플리케이션을 유연하게 구성할 수 있으며, 환경 변화에 따른 코드 수정 없이 설정 파일만으로 애플리케이션의 동작을 제어할 수 있습니다.**
